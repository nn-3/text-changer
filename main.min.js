function textChanger(e,t){let n="addEventListener",l=document,a=e=>e instanceof HTMLElement?e:l.getElementById(e),o=textChanger,r=Object.assign({setBtnId:"changeSet",clrBtnId:"changeClr",areaId:null,btnEvent:null,storage:"session",path:"textChanger",attr:"data-text",word:"default"},t||{}),d=Object.keys(e),s=Object.create(e),i,f=null!==r.storage;function c(){let t=a(r.areaId)||l.body,c=a(r.setBtnId),u=a(r.clrBtnId),h={},g=typeof r.btnEvent,p=!!c||!!u,y=!1,x=p&&("function"==g||!f),I=Array.isArray(o.nodes);for(let m of d)h[m]={},x&&(h[m].node=[]);if(l.querySelectorAll("["+r.attr+"]").forEach(e=>{let t=e.getAttribute(r.attr);if(!(0>d.indexOf(t))){if("INPUT"==e.tagName){if(!p)return;e.value=s[t],h[t].input=e,y=!0}else e.textContent=s[t],x&&h[t].node.push(e.childNodes[0]),I&&o.nodes.push(e.childNodes[0])}}),r.word){let v=r.word.match(/key|default/);if(v){let E=e=>e.replace(/[\-\/\|^$*+?.(){}\[\]]/g,"\\$&"),$=(e,t)=>{b[e]=t,k+=(k.length?"|":"")+E(e)},b={},k="",C,B=e=>{let t=Array.from(e.childNodes);for(let n of t)1!=n.nodeType||n.matches("script,["+r.attr+"],.no-change")?3==n.nodeType&&C(n):B(n)};if("key"==v[0])for(let N of d)$(N,N);else for(let S of d)$(e[S],S);if(k=E(r.word).replace(v[0],"("+k+")"),x||I)k=RegExp(k),C=e=>{if(I&&o.nodes.includes(e))return;let t=e.nodeValue.match(k);if(t){let n=t.index+t[0].length;t.input.length!=n&&C(e.splitText(n));let l=t.index?e.splitText(t.index):e;x&&h[b[t[1]]].node.push(l),I&&o.nodes.push(l),l.nodeValue=s[b[t[1]]]}};else{k=RegExp(k,"g");let T=(e,t)=>s[b[t]]||e;C=e=>e.nodeValue=e.nodeValue.replace(k,T)}B(t)}}if(y&&p){let V=e=>{for(let t of d)h[t].input&&e(t,h[t].input)},w=f?()=>{Object.keys(s).length?i.setItem(r.path,JSON.stringify(s)):i.removeItem(r.path)}:()=>{},_=x?(t,n)=>{V((e,t)=>{t.value=n[e],h[e].node.forEach(t=>t.nodeValue=n[e])}),"function"==g&&r.btnEvent(t,s,e)}:"string"==g?()=>{location.href=r.btnEvent}:()=>{location.reload()};c&&c[n]("click",()=>{V((e,t)=>s[e]=t.value),w(),_("set",s)}),u&&u[n]("click",()=>{V(e=>delete s[e]),w(),_("clr",e)})}}f&&(s=Object.assign(s,JSON.parse((i=window[r.storage+"Storage"]||window.sessionStorage).getItem(r.path))||{})),"loading"==l.readyState?l[n]("DOMContentLoaded",c):c()}
