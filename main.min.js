function textChanger(e,t){let n="addEventListener",l=document,o=e=>e instanceof HTMLElement?e:l.getElementById(e),a=Object.assign({setBtnId:"changeSet",clrBtnId:"changeClr",btnEvent:null,storage:"session",path:"textChanger",attr:"data-text",word:"default"},t||{}),r=Object.keys(e),d=Object.create(e),i,s=null!==a.storage;function f(){let t=o(a.areaId)||l.body,f=o(a.setBtnId),c=o(a.clrBtnId),u={},h=typeof a.btnEvent,g=!!f||!!c,p=!1,y=g&&("function"==h||!s),x="object"==typeof textChangerNodes&&Array.isArray(textChangerNodes);for(let m of r)u[m]={},y&&(u[m].node=[]);if(l.querySelectorAll("["+a.attr+"]").forEach(e=>{let t=e.getAttribute(a.attr);if(!(0>r.indexOf(t))){if("INPUT"==e.tagName){if(!g)return;e.value=d[t],u[t].input=e,p=!0}else e.textContent=d[t],y&&u[t].node.push(e.childNodes[0]),x&&textChangerNodes.push(e.childNodes[0])}}),a.word){let I=a.word.match(/key|default/);if(I){let v=e=>e.replace(/[\-\/\\|^$*+?.(){}\[\]]/g,"\\$&"),E=(e,t)=>{b[e]=t,$+=($.length?"|":"")+v(e)},b={},$="",k,B=e=>{let t=Array.from(e.childNodes);for(let n of t)1!=n.nodeType||n.matches("script,["+a.attr+"]")?3==n.nodeType&&k(n):B(n)};if("key"==I[0])for(let C of r)E(C,C);else for(let N of r)E(e[N],N);if($=v(a.word).replace(RegExp(I[0]),"("+$+")"),y||x)$=RegExp($),k=e=>{if(x&&textChangerNodes.includes(e))return;let t=e.nodeValue.match($);if(t){let n=t.index+t[0].length;t.input.length!=n&&k(e.splitText(n));let l=t.index?e.splitText(t.index):e;y&&u[b[t[1]]].node.push(l),x&&textChangerNodes.push(l),l.nodeValue=d[b[t[1]]]}};else{$=RegExp($,"g");let S=(e,t)=>d[b[t]]||e;k=e=>e.nodeValue=e.nodeValue.replace($,S)}B(t)}}if(p&&g){let T=e=>{for(let t of r)u[t].input&&e(t,u[t].input)},V=s?()=>{Object.keys(d).length?i.setItem(a.path,JSON.stringify(d)):i.removeItem(a.path)}:()=>{},w=y?(t,n)=>{T((e,t)=>{t.value=n[e],u[e].node.forEach(t=>t.nodeValue=n[e])}),"function"==h&&a.btnEvent(t,d,e)}:"string"==h?()=>{location.href=a.btnEvent}:()=>{location.reload()};f&&f[n]("click",()=>{T((e,t)=>d[e]=t.value),V(),w("set",d)}),c&&c[n]("click",()=>{T(e=>delete d[e]),V(),w("clr",e)})}}s&&(d=Object.assign(d,JSON.parse((i=window[a.storage+"Storage"]||window.sessionStorage).getItem(a.path))||{})),"loading"==l.readyState?l[n]("DOMContentLoaded",f):f()}
